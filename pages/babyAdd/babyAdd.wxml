<view class="page">
  <!-- 头像上传 -->
  <view class="avatar-section">
    <view class="avatar-upload" bindtap="onChooseAvatar">
      <t-image 
        wx:if="{{babyInfo.avatar}}" 
        src="{{babyInfo.avatar}}" 
        mode="aspectFill" 
        class="avatar-image"
      />
      <t-image 
        wx:else 
        src="/assets/baby.png" 
        mode="aspectFill" 
        class="avatar-placeholder"
      >
        <view slot="error" class="placeholder-content">
          <t-icon name="camera" size="60rpx" color="#ccc" />
          <text class="upload-tip">点击上传头像</text>
        </view>
      </t-image>
    </view>
  </view>

  <!-- 表单区域 -->
  <view class="form-container">
    <!-- 宝宝姓名 -->
    <view class="form-item">
      <view class="form-label">宝宝姓名</view>
      <view class="form-content">
        <t-input class="form-input" placeholder="请输入宝宝姓名" placeholder-style="color: #999" bindinput="onNameInput" value="{{babyInfo.name}}" />
      </view>
    </view>

    <!-- 宝宝昵称 -->
    <view class="form-item">
      <view class="form-label">宝宝昵称</view>
      <view class="form-content">
        <t-input class="form-input" placeholder="请输入宝宝昵称" placeholder-style="color: #999" bindinput="onNameInput" value="{{babyInfo.name}}" />
      </view>
    </view>

    <!-- 性别选择 -->
    <view class="form-item">
      <view class="form-label">宝宝性别</view>
      <view class="form-content">
        <t-radio-group class="gender-group" value="{{babyInfo.gender}}" bindchange="onGenderChange">
          <t-radio class="gender-radio" value="male">男宝</t-radio>
          <t-radio class="gender-radio" value="female">女宝</t-radio>
        </t-radio-group>
      </view>
    </view>

    <!-- 出生日期 -->
    <view class="form-item" bindtap="showDatePicker">
      <view class="form-label">出生日期</view>
      <view class="form-content">
        <text class="picker-text">{{babyInfo.birthday || '请选择出生日期'}}</text>
        <t-icon name="chevron-right" size="24rpx" color="#999" />
      </view>
    </view>
  </view>

  <!-- 宝宝描述 -->
  <view class="description-container">
    <view class="description-header">
      <text class="description-title">宝宝描述</text>
      <text class="word-count">{{descriptionLength}}/300</text>
    </view>
    <view class="description-content">
      <t-textarea
        class="description-textarea"
        placeholder="请输入宝宝描述（最多300字）"
        placeholder-style="color: #999"
        value="{{babyInfo.description}}"
        maxlength="300"
        bindchange="onDescriptionChange"
        bindinput="onDescriptionInput"
        bindblur="onDescriptionBlur"
        auto-height
        show-confirm-bar="{{false}}"
      />
    </view>
  </view>

  <!-- 底部操作按钮 -->
  <view class="footer">
    <t-button class="cancel-btn" bindtap="onCancel" theme="default">取消</t-button>
    <t-button class="submit-btn" bindtap="onSubmit" theme="primary">确认添加</t-button>
  </view>

  <!-- 日期选择器 -->
  <t-picker visible="{{showDatePicker}}" title="选择出生日期" value="{{datePickerValue}}" keys="{{ { value: 'value', label: 'label' } }}" cancelBtn="取消" confirmBtn="确认" bind:change="onDatePickerChange" bind:confirm="onDatePickerConfirm" bind:cancel="onDatePickerCancel">
    <t-picker-item options="{{yearOptions}}"></t-picker-item>
    <t-picker-item options="{{monthOptions}}"></t-picker-item>
    <t-picker-item options="{{dayOptions}}"></t-picker-item>
  </t-picker>
</view>