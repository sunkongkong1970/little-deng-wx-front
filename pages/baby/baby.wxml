<view class="page">
  <!-- 隐藏的canvas用于颜色检测 -->
  <canvas type="2d" id="color-detector" style="width: 100rpx; height: 100rpx; position: absolute; left: -200rpx;"></canvas>
  
  <!-- 宝宝卡片区域 -->
  <view class="cards-container">
    <block wx:if="{{hasBaby}}">
      <t-card class="baby-card">
        <view slot="cover" class="baby-card-cover">
          <t-image class="baby-image" src="/assets/baby.png" mode="aspectFill" bindload="onImageLoad" />
          <text class="baby-name-floating" style="color: {{textColor}}">小暖</text>
        </view>
      </t-card>
    </block>
    
    <!-- 添加宝宝卡片 -->
    <view class="add-baby-card" bindtap="onAddBaby">
      <view class="add-icon">+</view>
      <text class="add-text">添加宝宝</text>
    </view>
  </view>
  
  <!-- 登录弹窗 -->
  <view class="auth-mask" wx:if="{{authVisible}}" bindtap="closeAuth">
    <view class="auth-modal" catchtap="stopPropagation">
      <view class="brand">
        <t-image src="/assets/default.png" width="80" height="80" shape="round" />
        <text class="slogan">欢迎使用 成长日记 小程序，登录后即可管理家庭与宝宝信息</text>
      </view>
      <view class="actions">
        <t-button wx:if="{{canIUseGetUserProfile}}" bindtap="onGetUserProfile">微信授权登录</t-button>
      </view>
    </view>
  </view>
  <t-toast id="toast" />
</view>
