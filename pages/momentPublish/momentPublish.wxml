<view class="page-container">
	<!-- å†…å®¹ç¼–è¾‘åŒº -->
	<scroll-view class="content-area" scroll-y>
		<!-- æ–‡å­—è¾“å…¥åŒº -->
		<textarea 
			class="content-input"
			placeholder="è¿™ä¸€åˆ»çš„æƒ³æ³•..."
			value="{{content}}"
			bindinput="onContentChange"
			maxlength="1000"
			auto-height
			show-confirm-bar="{{false}}"
			cursor-spacing="20"
		></textarea>

		<!-- å›¾ç‰‡ç½‘æ ¼åŒºåŸŸ -->
		<view class="image-section">
			<view class="image-grid">
				<block wx:for="{{images}}" wx:key="index">
					<view class="image-item">
						<image 
							class="image" 
							src="{{item}}" 
							mode="aspectFill"
							bindtap="previewImage"
							data-index="{{index}}"
						/>
						<view class="delete-btn" bindtap="deleteImage" data-index="{{index}}">
							<text class="delete-icon">Ã—</text>
						</view>
					</view>
				</block>
				<!-- æ·»åŠ å›¾ç‰‡æŒ‰é’® -->
				<view class="image-item add-image" wx:if="{{images.length < 9}}" bindtap="chooseImage">
					<view class="add-icon">
						<view class="add-line add-line-v"></view>
						<view class="add-line add-line-h"></view>
					</view>
				</view>
			</view>
		</view>

		<!-- ä½ç½®é€‰æ‹©åŒºåŸŸ -->
		<view class="location-section">
			<view class="location-item" bindtap="chooseLocation">
				<view class="location-left">
					<text class="location-icon">ğŸ“</text>
					<view class="location-info" wx:if="{{location}}">
						<text class="location-name">{{location.name}}</text>
						<text class="location-address" wx:if="{{location.address}}">{{location.address}}</text>
					</view>
					<text class="location-label" wx:else>æ‰€åœ¨ä½ç½®</text>
				</view>
				<view class="location-right">
					<text class="location-arrow" wx:if="{{!location}}">â€º</text>
					<view class="location-close" wx:if="{{location}}" bindtap="clearLocation" catchtap="clearLocation">
						<text class="close-icon">Ã—</text>
					</view>
				</view>
			</view>
		</view>
	</scroll-view>

	<!-- åº•éƒ¨æ“ä½œæ  -->
	<view class="bottom-bar">
		<t-button 
			class="cancel-button" 
			variant="base" 
			size="medium"
			disabled="{{isChoosingLocation}}"
			bindtap="onCancel"
		>å–æ¶ˆ</t-button>
		<t-button 
			class="publish-button" 
			theme="primary" 
			size="medium"
			disabled="{{!canPublish || isChoosingLocation}}"
			bindtap="onPublish"
		>å‘è¡¨</t-button>
	</view>

	<!-- ä½ç½®é€‰æ‹©é®ç½©å±‚ -->
	<view class="location-mask" wx:if="{{isChoosingLocation}}"></view>
</view>
